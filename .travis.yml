language: java

matrix:
   include:
      - jdk: openjdk8
        env: ADDITIONAL_MAVEN_ARGS="-Pjacoco coveralls:report"

# skip installation step
install: true

addons:
  sonarcloud:
    organization: "lorenzomorg-github"
    token:
      secure: "TUikI67GBaPovpEPOispsj32Dc7TlvpWvsDyvC8wmBZj+tneMSMhcGfUIPxEw+eK0qQQsQJa0qgOOSx3QqsJYlLe9a8vjmjHpJYypZFaG3HP7BBc4ZT5dOvdS18FnPqYqm19lt5nMMVT2vHw3spBSl4p/QSmmalXB3XJ+sT6wsEx21LUnMadEl37Hv7ZJtcZhYbpeInvLPe4oOFqGavUodwMHB17MEBPCvfo9KUhXSliL0GoVUJ3VmUmH9dKK0gUzjiBFRe+LXCaD+UNlRthGmrH6YPSWqbkiXxp4GTeHnsq8nebImz6iw5ytVK5s3hH9AlMx4gGHbUtF5nujY59GU94MtM8yjkk5ZMei9DakZgeKAkZ1vQRiim8qfpRgRS5/+GI1euG2AQlrGi+4vbN5tY8IXrfwwfug1lk7IVJ1G/2LsAc1Jcx+Qy72DMBEhBlZjon9+CiSjS8eJJ22AVSifkoJLn+2jLoWHVlmqFhrjxVcw70zA7Qx1zP198GSZEi0qyUvMllOf+cgoTEKKRAHYYeT4Hdwl4sWRBbL4Jwybp+WuUiOzjmUVMstYlidFdpiAHhAYiGK8NMqTogDwtYo0mFlippA8iVGkoNBcnbetbPALGPuIppgOxvXOJp8sThjk/PRtixuD/yfzPGf6b+v2ZoLeANas+mFJbOEjbPB5s="

script: 
  - cd attsd-spring-project 
  - mvn clean verify $ADDITIONAL_MAVEN_ARGS
    # the following command line builds the project, runs the tests with coverage and then execute the SonarCloud analysis
  - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar

cache:
   directories:
      - '$HOME/.m2'
      - '$HOME/.sonar/cache'
